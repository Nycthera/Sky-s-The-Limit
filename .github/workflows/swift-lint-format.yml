name: Swift Lint & Format

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  lint-format:
    name: Lint and Format Swift Code
    runs-on: macos-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Install SwiftLint and SwiftFormat
        run: |
          brew install swiftlint || echo "SwiftLint already installed"
          brew install swiftformat || echo "SwiftFormat already installed"

      - name: Run SwiftLint
        run: swiftlint

      - name: Run SwiftFormat
        run: swiftformat .

      - name: Run Swift Built-in Formatter
        run: swift format --in-place --recursive Sources/

